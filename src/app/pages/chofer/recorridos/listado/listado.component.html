<div class="sm:ml-52      py-8 px-2  ">
   <div class="p-2   rounded-lg  h-full  dark:border-gray-700 mt-8 transition-colors duration-30 ">
      <div
         class="flex justify-between items-center w-full p-2 bg-transparent dark:bg-gray-500 rounded-tr-md rounded-tl-md text-gray-600 dark:text-white">
         <h1 class="text-2xl ">Recorridos</h1>
         <!-- <button (click)="descargarExcel()" class="text-md rounded-full border p-2 border-black dark:border-white hover:bg-green-500 dark:hover:bg-green-500 hover:text-white ">
             <svg class="fill-current w-5 h-5" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M439.658,91.21L351.435,2.987C349.522,1.075,346.928,0,344.223,0H79.554c-5.633,0-10.199,4.566-10.199,10.199v491.602 c0,5.633,4.566,10.199,10.199,10.199h352.892c5.632,0,10.199-4.566,10.199-10.199V98.422 C442.645,95.717,441.57,93.123,439.658,91.21z M354.422,34.823l53.401,53.4h-53.401V34.823z M422.247,491.602H89.753V20.398 h244.271v78.024c0,5.633,4.567,10.199,10.199,10.199h78.024V491.602z"></path> </g> </g> <g> <g> <path d="M282.012,454.884H119.331c-5.633,0-10.199,4.566-10.199,10.199s4.566,10.199,10.199,10.199h162.681 c5.632,0,10.199-4.566,10.199-10.199S287.644,454.884,282.012,454.884z"></path> </g> </g> <g> <g> <path d="M334.026,454.884h-11.067c-5.632,0-10.199,4.566-10.199,10.199s4.567,10.199,10.199,10.199h11.067 c5.632,0,10.199-4.566,10.199-10.199S339.658,454.884,334.026,454.884z"></path> </g> </g> <g> <g> <path d="M311.6,263.139l75.737-93.534c2.473-3.056,2.972-7.261,1.278-10.809c-1.692-3.549-5.274-5.808-9.205-5.808h-84.952 c-3.078,0-5.99,1.389-7.926,3.781L256,194.475l-30.532-37.706c-1.936-2.392-4.849-3.781-7.926-3.781H132.59 c-3.931,0-7.513,2.259-9.206,5.808c-1.693,3.548-1.194,7.754,1.279,10.809l75.737,93.534l-75.737,93.534 c-2.474,3.056-2.972,7.261-1.279,10.809c1.693,3.548,5.274,5.808,9.206,5.808h84.952c3.077,0,5.99-1.389,7.926-3.781L256,331.804 l30.531,37.706c1.936,2.392,4.849,3.781,7.926,3.781h84.953c3.931,0,7.513-2.259,9.205-5.808 c1.693-3.548,1.195-7.754-1.279-10.809L311.6,263.139z M299.323,173.386h58.706l-59.553,73.545l-29.352-36.25L299.323,173.386z M212.677,352.892h-58.706l59.552-73.545l29.352,36.25L212.677,352.892z M299.323,352.892L153.971,173.386h58.706l145.351,179.506 H299.323z"></path> </g> </g> </g></svg>
          </button> -->
      </div>

      <div class="w-full mb-4">
         @if (cargando()) {
         <div>
            <div class="animate-pulse flex space-x-4">
               <div class="flex-1 space-y-4 py-1">
                  <div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-3/4"></div>
                  <div class="space-y-2">
                     <div class="h-4 bg-gray-300 dark:bg-gray-700 rounded"></div>
                     <div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-5/6"></div>
                  </div>
               </div>
            </div>
         </div>

         }@else{
         <ejs-grid #grid [dataSource]='Recorridos()' [filterSettings]="filterSettings " (dataBound)='dataBound()'
            [allowExcelExport]='true' AutoFitAll="true" [height]="heightGrid" allowReordering='true'
            [allowFiltering]=true allowPaging="true " allowResizing="true" allowSorting="true"
            [pageSettings]='pageSettings'>
            <e-columns>

               <e-column field='id_recorrido' [allowFiltering]="false" headerText='' width='40'> >
                  <ng-template #template let-data>
                     <div class="grid grid-cols-2  mt-2">                        
                        <!-- <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mt-1  cursor-pointer stroke-current"
                           viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round"
                           stroke-linejoin="round">
                           <polygon points="5 3 19 12 5 21 5 3" />
                        </svg>         
                                        -->
                  <svg class="h-6 w-6  cursor-pointer fill-current"  version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 60 60" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M45.563,29.174l-22-15c-0.307-0.208-0.703-0.231-1.031-0.058C22.205,14.289,22,14.629,22,15v30 c0,0.371,0.205,0.711,0.533,0.884C22.679,45.962,22.84,46,23,46c0.197,0,0.394-0.059,0.563-0.174l22-15 C45.836,30.64,46,30.331,46,30S45.836,29.36,45.563,29.174z M24,43.107V16.893L43.225,30L24,43.107z"></path> <path d="M30,0C13.458,0,0,13.458,0,30s13.458,30,30,30s30-13.458,30-30S46.542,0,30,0z M30,58C14.561,58,2,45.439,2,30 S14.561,2,30,2s28,12.561,28,28S45.439,58,30,58z"></path> </g> </g></svg>
                   <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5  cursor-pointer stroke-current"
                           viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round"
                           stroke-linejoin="round">
                           <rect x="6" y="6" width="12" height="12" />
                        </svg>                                                 
                        <counter  [startTime]="today" [isRunning]="true"></counter>                       
                     </div>

                  </ng-template>
               </e-column>
               <!-- <e-column field='factura' headerText="Factura" />
               <e-column field='importe_factura' headerText="Importe" width='150'>
                  <ng-template #template let-data>
                     {{data.importe_factura | currency}}
                  </ng-template>
                  <ng-template #editTemplate let-data>
                     <input class="e-input" type="text">
                  </ng-template>
               </e-column>
               <e-column field='costo_viaje' headerText="Costo de envio" >
                  <ng-template #template let-data>
                     {{data.costo_viaje| currency}}
                  </ng-template>
                  </e-column>                  
               <e-column field='tipo'>
                  <ng-template #template let-data>
                     {{data.tipo | uppercase}}
                  </ng-template>
               </e-column> -->

               <e-column field='destino' />
               <e-column field='observaciones' />
               <e-column field='descripcion_tipo_servicio' headerText="Servicio"></e-column>
               <e-column field='nombre_chofer' headerText='chofer' width='150'></e-column>
               <e-column field='descripcion_transporte' headerText='transporte' width='150'></e-column>
               <!-- <e-column field='opsAsignadas' headerText="Op"></e-column> -->
               <!-- <e-column field='remisionesAsignadas' headerText="Remisión"></e-column> -->
               <e-column field='kilometraje_inicial' headerText="Inicial" width='150'>
                  <ng-template #template let-data>
                     @if (data.tipo=='interno' && !data.kilometraje_inicial){
                     <h1 class="border rounded px-1 text-center text-white  bg-amber-500">PENDIENTE</h1>
                     }@else{
                     {{data.kilometraje_inicial ??'N/A'}}
                     }
                  </ng-template>
               </e-column>
               <e-column field='kilometraje_final' headerText="Final" width='150'>
                  <ng-template #template let-data>
                     @if (data.tipo=='interno' && !data.kilometraje_final){
                     <h1 class="border rounded px-1 text-white text-center  bg-amber-500">PENDIENTE</h1>
                     }@else{
                     {{data.kilometraje_final ??'N/A'}}
                     }

                  </ng-template>
               </e-column>
               <!-- <e-column field='kilometros' headerText="kilometros"></e-column> -->
               <e-column field='fecha_salida' headerText="Salida" width='150'>
                  <ng-template #template let-data>
                     @if(data.tipo=='interno'){
                     @if (!data.fecha_salida){
                     <h1 class="border rounded text-center px-1 max-w-20 text-white  bg-amber-500">PENDIENTE</h1>
                     }@else{
                     {{data.fecha_salida ? (data.fecha_salida | date: 'dd-MM-yyyy hh:mm a'):'N/A' }}
                     }
                     }@else{
                     {{data.fecha_salida ? (data.fecha_salida | date: 'dd-MM-yyyy'):'N/A' }}
                     }
                  </ng-template>
               </e-column>
               <e-column field='fecha_regreso' headerText="Regreso" allowEditing="false" width='150'>
                  <ng-template #template let-data>
                     @if(data.tipo=='interno' && !data.fecha_salida){
                     <h1 class="border rounded text-center px-1 max-w-20 text-white bg-amber-500">PENDIENTE</h1>
                     }@else{
                     {{data.fecha_regreso ? (data.fecha_regreso | date: 'dd-MM-yyyy hh:mm a'):'N/A' }}
                     }
                  </ng-template>
               </e-column>



            </e-columns>
         </ejs-grid>

         }


      </div>

   </div>
   <!-- <div class="relative">
      <button (click)="irNuevo()" class="fab-button fixed bottom-1 right-4   bg-blue-500 dark:bg-gray-500   hover:bg-blue-700 dark:hover:bg-gray-700  text-white font-bold py-4 px-4 rounded-full shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-gray-700 focus:ring-opacity-50" >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
        </svg>
      </button>          
    </div>
  -->

   <p-dialog header="Editar información" [visible]="visible()" [style]="{ width: '25rem' }" (onHide)="hideEditDialog()"
      (visibleChange)="visibleChange($event)">
      @if(recorridoActivo){
      <div class="flex flex-col gap-3 mt-2 ">
         <div class="flex space-x-4 items-center">
            <label for="factura">Factura</label>
            <input id="factura" maxlength="20" [(ngModel)]="recorridoActivo.factura"
               class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
               placeholder="Factura" autocomplete="off" />
         </div>
         <div class="flex space-x-4 items-center ">
            <label for="importe" autocomplete="off">Importe</label>
            <input id="importe" [(ngModel)]="recorridoActivo.importe_factura" maxlength="20"
               (input)="onInput($event,'')" (keypress)="onValidateNumber($event)"
               class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
               placeholder="Importe" autocomplete="off" />
         </div>
      </div>
      }
      <div class="flex  justify-end  ">
         <button label="Save"
            class="mt-6 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"
            (click)="save()">Guardar</button>
      </div>
   </p-dialog>